# 算数バトル

パズドラ風のバトルシステムで算数を楽しく学べるゲームです。

## 概要

モンスターを仲間にして、算数の問題を解いてバトル！
小学1年生から6年生までの算数を、ゲーム感覚で学習できます。

## 操作方法

### PC
- マウスクリックで選択

### タブレット/スマホ
- タップで選択
- 数字入力はテンキーパッドで

## ゲームルール

### バトル
1. ステージを選択してバトル開始
2. 算数の問題が出題される
3. 正解するとモンスターが敵を攻撃
4. 不正解だと敵から反撃を受ける
5. 敵のHPを0にすればクリア

### ダメージ計算
- ダメージ = モンスターの攻撃力 × タイプ相性
- タイプ相性: 有利なら2倍、不利なら0.5倍

### ランク
- S: 全問正解 & 素早くクリア
- A: 高正答率 & 目標時間内
- B: 中程度の成績
- C: クリアはしたが改善の余地あり

### 報酬
- 基本報酬: 学年・分野・レベルで決定
- 初回クリアボーナス: 3倍
- ランクボーナス: S > A > B > C

### ガチャ
- 50コインで挑戦
- 5秒間で四則演算の問題を解く
- 正解した数だけモンスターをゲット
- レアリティ: ★ > ★★ > ★★★ > ★★★★ > ★★★★★

### モンスター
- レベルアップで強くなる
- 経験値はバトルクリアで獲得
- 一部のモンスターは進化可能
- スキルは全て数字に関連した効果

## 構成

```
math-battle/
├── index.html      # メインHTML
├── style.css       # スタイルシート
├── game.js         # メインゲームロジック
├── monsters.js     # モンスターデータ
├── questions.js    # 問題生成システム
├── stages.js       # ステージデータ
├── save.js         # セーブ/ロード機能
└── README.md       # このファイル
```

## 状態/データ

### プレイヤーデータ (LocalStorage)
- 所持コイン
- パーティ編成
- 所持モンスター（ID、レベル、経験値）
- クリア済みステージ
- ステージランク
- 発見済みモンスター（図鑑）
- 統計情報

### モンスターパラメータ
- HP: 10〜100（計算しやすい範囲）
- 攻撃: 5〜50
- 防御: 5〜30
- レベルアップで+1〜3程度ずつ上昇

## 画面/レスポンシブ

### 対応デバイス
- PC (Chrome, Firefox, Safari, Edge)
- タブレット (iPad, Android)
- スマートフォン (iPhone, Android)

### レスポンシブ対応
- 最小幅: 320px
- タブレット: 768px以上でレイアウト最適化
- セーフエリア対応 (iPhone X以降)
- 縦横回転対応

## 素材/クレジット

- フォント: M PLUS Rounded 1c (Google Fonts)
- 効果音: Web Audio API による動的生成
- アイコン: 絵文字を使用
- モンスター画像: `public/games/math-battle/assets/monsters/`（一部モンスターで使用）

## TODO / 既知の課題

- [ ] より多くのモンスター追加
- [ ] スキル発動システムの実装
- [ ] BGM追加
- [ ] 実績システム
- [ ] デイリーミッション

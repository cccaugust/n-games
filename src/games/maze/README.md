# 3D迷路メーカー

## 概要
64×64マスの迷路を「ペイント」して保存し、その迷路を簡易3D（レイキャスト）で遊べるゲームです。

## 操作方法

### 作成モード
- ツール（壁/通路/スタート/ゴール）を選んで、キャンバスをドラッグでぬります。
- スタート/ゴールは1つずつです。
- **保存**: 名前を入れて「保存」。
- **読みこみ**: 「読みこみ」→ 迷路ライブラリ（一覧）から選ぶ。
  - 迷路ごとに **ロード / 削除 / 書き出し（JSON）** ができます。
  - ライブラリ上部から **ぜんぶエクスポート / インポート** もできます（バックアップ用）。

### プレイモード
- **PC**: WASD（移動/横移動）、←→（回転）、↑↓（前後）
- **スマホ/タブレット**: 画面下のボタン
- **タイム**: 右上にミニマップ、上部にタイム（⏱️）と自己ベスト（🏆）が出ます。

## 構成
- `index.html`: UI（タブ、キャンバス、ボタン）
- `game.js`: エディタ（64×64ペイント）と3Dプレイ（レイキャスト）

## 状態/データ
- 迷路データは `localStorage` に保存します。
  - key: `ngames.mazes.v1`
  - 形式: 配列（各要素が `{ name, w, h, grid, start, goal }`）
- 自己ベストタイム（端末内）は `localStorage` に保存します。
  - key: `ngames.mazes.bestTime.v1`
  - 形式: `{ "<mazeName>": <ms> }`
- ランキング（家族内）は Supabase の `scores` を使います。
  - `game_id` は迷路ごとに `maze:<mazeName>` にしています
  - `score` は **-ミリ秒**（小さいタイムほど大きいスコアになるように）

## TODO / 既知の課題
- 3Dの床/天井の表現やミニマップ、タイム計測などの演出追加
- `mazeName` が同じだと同じランキングに混ざる（将来的にID発行するとより安全）


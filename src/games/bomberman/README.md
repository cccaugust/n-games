# ボンバーマン

爆弾を使ってブロックを破壊し、敵を倒してゴールを目指すアクションゲーム。

## 概要

- 爆弾を設置してブロックを破壊し、道を切り開く
- すべての敵を倒すと出口が開く
- 制限時間内にゴールを目指す

## 操作方法

### PC
| 操作 | キー |
|------|------|
| 移動 | 矢印キー / WASD |
| 爆弾設置 | スペースキー |
| ポーズ | Escape |

### タッチ（スマホ/タブレット）
- 十字キー（D-pad）: 移動
- 爆弾ボタン: 爆弾設置

## ゲームルール

### 基本ルール
- 爆弾は設置後3秒で爆発
- 爆発は十字方向に広がる
- 爆発に巻き込まれるとライフが減る（無敵時間あり）
- ライフが0になるとゲームオーバー
- 制限時間が0になってもゲームオーバー

### クリア条件
1. すべての敵を倒す → 出口が開く
2. 出口に到達 → ステージクリア

### アイテム
ブロック破壊時にアイテムが出現することがある：

| アイテム | 効果 |
|---------|------|
| 💣 爆弾+ | 同時設置可能な爆弾数+1（最大8） |
| 🔥 火力+ | 爆発範囲+1（最大8） |
| 👟 速度+ | 移動速度+0.2（最大2.5） |
| 💥 貫通ボム | 爆発がブロックを貫通 |
| 👢 キック | 爆弾を蹴って転がせる |
| ❤️ ライフ | ライフ+1（最大5） |

### 敵の種類

| 敵 | 特徴 |
|----|------|
| スライム | ランダム移動（100pt） |
| コウモリ | 高速ランダム移動（200pt） |
| ゴースト | 壁・爆弾をすり抜ける（400pt） |
| チェイサー | プレイヤーを追跡（300pt） |
| キングスライム | 賢い移動パターン（1000pt） |

## 機能

### スキン選択
タイトル画面の「スキン変更」から選択可能：
- ドット絵メーカーのサンプル
- 自分で作ったドット絵
- オリジナルポケモン

### ステージエディター
オリジナルステージを作成可能：
- 壁・ブロックの配置
- 敵の配置
- アイテム出現率の設定
- 制限時間の設定

### 敵エディター
オリジナルの敵キャラクターを作成可能：
- 移動速度
- 行動パターン（ランダム/追跡/パトロール/賢い）
- 壁すり抜け/爆弾すり抜け

## 構成

```
src/games/bomberman/
├── index.html    # メインHTML
├── styles.css    # スタイルシート
├── game.js       # ゲームメインロジック
├── entities.js   # エンティティクラス（プレイヤー、敵、爆弾等）
├── audio.js      # 効果音システム（Web Audio API）
├── stages.js     # ステージデータ管理
├── settings.js   # 設定・スキン選択
└── README.md     # このファイル
```

## 状態・データ

### ゲーム状態
- `gameState`: 現在の画面状態（title/playing/paused/clear/gameover等）
- `mapData`: 現在のマップデータ（2次元配列）
- `player`: プレイヤーオブジェクト
- `enemies`: 敵の配列
- `bombs`: 爆弾の配列
- `explosions`: 爆発エフェクトの配列
- `items`: アイテムの配列
- `particles`: パーティクルエフェクトの配列

### 永続化（localStorage）
- `ngames.bomberman.player_skin.v1`: 選択中のスキン
- `ngames.bomberman.custom_stages.v1`: カスタムステージ
- `ngames.bomberman.progress.v1`: クリア状況・ハイスコア
- `ngames.bomberman.custom_enemies.v1`: カスタム敵
- `ngames.bomberman.sound.v1`: サウンド設定

## 画面・レスポンシブ

### 対応デバイス
- PC（キーボード操作）
- タブレット（タッチ操作）
- スマートフォン（タッチ操作）

### レイアウト
- ゲームキャンバスは画面サイズに合わせて自動スケール
- モバイルでは画面下部にタッチ操作UIを表示
- セーフエリア対応（iOS notch等）

## 効果音

Web Audio APIによるシンセサイザー音源：
- 爆弾設置音
- 爆発音
- ブロック破壊音
- アイテム取得音
- 敵撃破音
- プレイヤーダメージ音
- ステージクリア/ゲームオーバー音

## TODO / 既知の課題

- [ ] ドット絵素材（プレイヤー、敵、地形）をsamples.jsonに追加
- [ ] ステージ進行時のパワーアップ引き継ぎ
- [ ] オンラインランキング対応
- [ ] マルチプレイヤー対戦モード

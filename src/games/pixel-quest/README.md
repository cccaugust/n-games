# Game: pixel-quest（ピクセルクエスト）

## 概要
宝石（💎）を全部集めてから、ゴール（🏁）に入るとステージクリアするゲームです。  
ステージエディタで「自分のオリジナルステージ」も作れます。

## 操作方法
- **PC**: ↑↓←→ で移動、`R` でやり直し
- **スマホ/タブレット**: 画面下の方向ボタンで移動

## ルール
- **💎を全部取る** → **🏁へ入る** とクリア
- **⚠️トゲ** に乗ると、そのステージを最初からやり直し

## ステージ作成（エディタ）
- タイル（床/壁/宝石/トゲ/ゴール/スタート）を選んで、キャンバスをドラッグして配置します
- **見た目**で、ドット絵メーカー（`/pages/pixel-art-maker/`）で作った作品を設定できます
  - プレイヤー / 壁 / 宝石 / ゴール / トゲ の画像を差し替え可能

## 構成
- `index.html`: ステージ選択へリダイレクト
- `stage-select.html` / `stage-select.js`: ステージ一覧
- `play.html` / `play.js`: ゲーム本体
- `editor.html` / `editor.js`: ステージエディタ
- `shared.js`: ステージ保存（localStorage）・正規化・ドット絵（PixelAsset）読み込み
- `style.css`: 見た目

## 状態/データ（保存）
- ステージは `localStorage` に保存します（キー: `ngames.pixelQuest.stages.v1`）
- ステージデータには「見た目（PixelAssetのid）」も含まれます

## 画面/レスポンシブ
- PC/タブレット/スマホ対応
- Canvasは `devicePixelRatio` を考慮して描画し、回転/リサイズでも崩れにくくしています
- セーフエリア（ノッチ）を考慮して `env(safe-area-inset-*)` を使用しています

## TODO / 既知の課題
- ステージプレビューにもスキンを反映（今は色だけ）
- ステージに「動く敵」や「カギ/ドア」などのギミック追加
- ステージ共有（Supabase保存）対応


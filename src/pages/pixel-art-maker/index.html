<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>ドット絵メーカー | N-Games</title>
    <link rel="stylesheet" href="../../style.css" />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="topbar-inner">
        <div class="brand">
          <div class="brand-title">ドット絵メーカー</div>
          <div class="brand-sub">つくる → ためる → ゲームでつかう（準備中）</div>
        </div>

        <div class="topbar-actions">
          <div class="player-pill" id="playerPill">Player</div>
          <a class="btn-link" id="backToPortal" href="#">ポータルへ</a>
        </div>
      </div>
    </header>

    <main class="container app" id="appRoot" data-view="gallery">
      <section class="card gallery" id="galleryView">
        <div class="gallery-head">
          <div>
            <div class="section-title">ギャラリー</div>
            <div class="tiny-note">作品をえらんで編集 / もしくは新規作成</div>
          </div>
          <button class="btn-primary-solid" id="galleryNewBtn" type="button">＋ 新規作成</button>
        </div>
        <div class="gallery-controls" aria-label="ギャラリー操作">
          <div class="gallery-filters" role="tablist" aria-label="種類フィルタ">
            <button class="chip active" id="filterKindAll" type="button" role="tab" aria-selected="true" data-kind="all">
              すべて
            </button>
            <button class="chip" id="filterKindCharacter" type="button" role="tab" aria-selected="false" data-kind="character">
              キャラ
            </button>
            <button class="chip" id="filterKindObject" type="button" role="tab" aria-selected="false" data-kind="object">
              モノ
            </button>
            <button class="chip" id="filterKindTile" type="button" role="tab" aria-selected="false" data-kind="tile">
              地形
            </button>
          </div>

          <div class="gallery-search">
            <label class="sr-only" for="gallerySearchInput">検索</label>
            <input id="gallerySearchInput" type="search" inputmode="search" placeholder="なまえで検索…" />

            <label class="sr-only" for="gallerySortSelect">並び替え</label>
            <select id="gallerySortSelect">
              <option value="updated_desc">新しい順</option>
              <option value="updated_asc">古い順</option>
              <option value="name_asc">名前（A→Z）</option>
              <option value="name_desc">名前（Z→A）</option>
              <option value="size_desc">サイズ（大きい順）</option>
              <option value="size_asc">サイズ（小さい順）</option>
            </select>
          </div>
        </div>
        <div class="gallery-summary" id="gallerySummary" aria-live="polite"></div>
        <div class="gallery-grid" id="galleryList"></div>
      </section>

      <div class="workspace" id="editorView" hidden>
        <section class="card canvas-panel">
          <div class="canvas-head">
            <div class="canvas-head-left">
              <div class="small-label">キャンバス</div>
              <div class="canvas-meta" id="canvasMeta">-</div>
            </div>

            <div class="canvas-head-right">
              <button class="btn-sub" id="backToGalleryBtn" type="button">← ギャラリー</button>
              <label class="inline">
                <span>ズーム</span>
                <input id="zoomRange" type="range" min="8" max="48" step="1" value="24" />
              </label>
              <label class="inline">
                <input id="gridToggle" type="checkbox" checked />
                <span>グリッド</span>
              </label>
            </div>
          </div>

          <div class="canvas-scroll" id="canvasScroll">
            <div class="canvas-frame grid" id="canvasFrame">
              <canvas id="pixelCanvas"></canvas>
            </div>
          </div>
        </section>

        <aside class="sidebar">
          <section class="card controls">
            <div class="section-title">作品</div>

            <div class="row">
              <label class="field">
                <span>なまえ</span>
                <input id="nameInput" type="text" maxlength="40" placeholder="なまえをつけよう" />
              </label>
            </div>

            <div class="row">
              <div class="tool-group">
                <button class="tool-btn active" id="toolPen" type="button">ペン</button>
                <button class="tool-btn" id="toolEraser" type="button">消しゴム</button>
                <button class="tool-btn" id="toolFill" type="button">ベタ塗り</button>
                <button class="tool-btn" id="toolPicker" type="button">スポイト</button>
              </div>
            </div>

            <div class="row">
              <div class="palette">
                <div class="palette-head">
                  <div class="palette-title">パレット（64色）</div>
                  <div class="palette-sub">フルカラーは下でも選べるよ</div>
                </div>
                <div class="palette-grid" id="paletteGrid"></div>
              </div>
            </div>

            <div class="row row-2">
              <label class="field">
                <span>フルカラー</span>
                <input id="colorInput" type="color" value="#333333" />
              </label>
              <button class="btn-sub" id="undoBtn" type="button">もどす</button>
              <button class="btn-sub" id="redoBtn" type="button">やりなおし</button>
            </div>

            <div class="row">
              <button class="btn-sub" id="clearBtn" type="button">全消し</button>
            </div>

            <div class="row actions">
              <button class="btn-primary-solid" id="newBtn" type="button">＋ 新規</button>
              <button class="btn-primary-solid" id="saveBtn" type="button">保存</button>
              <button class="btn-sub" id="duplicateBtn" type="button">複製</button>
              <button class="btn-danger" id="deleteBtn" type="button">削除</button>
            </div>

            <div class="row">
              <button class="btn-sub" id="exportBtn" type="button">PNGを書き出す</button>
            </div>

            <div class="tiny-note" id="statusText">-</div>
          </section>
        </aside>
      </div>

      <div class="modal-backdrop" id="newAssetModal" hidden>
        <div class="card modal">
          <div class="modal-head">
            <div>
              <div class="section-title">新規作成</div>
              <div class="tiny-note">種類とサイズをえらんでから編集をはじめよう</div>
            </div>
            <button class="btn-sub" id="newAssetCloseBtn" type="button">× 閉じる</button>
          </div>

          <div class="row">
            <label class="field">
              <span>なまえ</span>
              <input id="newNameInput" type="text" maxlength="40" placeholder="なまえをつけよう" />
            </label>
          </div>

          <div class="row row-2">
            <label class="field">
              <span>種類</span>
              <select id="newKindSelect">
                <option value="character">キャラ</option>
                <option value="object">モノ</option>
                <option value="tile">地形</option>
              </select>
            </label>
          </div>

          <div class="row">
            <label class="field">
              <span>サイズ</span>
              <div class="size-picker" id="newSizePicker"></div>
            </label>
          </div>

          <div class="row actions">
            <button class="btn-primary-solid" id="newAssetCreateBtn" type="button">作成して編集</button>
          </div>
        </div>
      </div>
    </main>

    <script type="module" src="./script.js"></script>
  </body>
</html>

